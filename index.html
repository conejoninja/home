<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Home Automation project</title>
    <meta name="generator" content="Hugo 0.21" />

    
    <meta name="description" content="Home Automation system.">
    
    <link rel="canonical" href="https://conejoninja.github.io/home/">
    
    <meta name="author" content="conejoninja">
    

    <meta property="og:url" content="https://conejoninja.github.io/home/">
    <meta property="og:title" content="Home Automation project">
    <meta property="og:image" content="https://conejoninja.github.io/home/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Home Automation project">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://conejoninja.github.io/home/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://conejoninja.github.io/home/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://conejoninja.github.io/home/fonts/icon.eot');
        src: url('https://conejoninja.github.io/home/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://conejoninja.github.io/home/fonts/icon.woff')
               format('woff'),
             url('https://conejoninja.github.io/home/fonts/icon.ttf')
               format('truetype'),
             url('https://conejoninja.github.io/home/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://conejoninja.github.io/home/stylesheets/application.css">
    <link rel="stylesheet" href="https://conejoninja.github.io/home/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://conejoninja.github.io/home/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://conejoninja.github.io/home/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://conejoninja.github.io/home/javascripts/modernizr.js"></script>

    
    <link href="https://conejoninja.github.io/home/index.xml" rel="alternate" type="application/rss+xml" title="Home Automation project" />
    <link href="https://conejoninja.github.io/home/index.xml" rel="feed" type="application/rss+xml" title="Home Automation project" />
    

  </head>
  <body class="palette-primary-blue-grey palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Home Automation project
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/conejoninja" title="@conejoninja on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/conejoninja/home" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://conejoninja.github.io/home/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Home Automation project <span class="version">1.0.0</span></strong>
        
          <br>
          conejoninja/home
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/conejoninja/home/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/conejoninja/home/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  




<a class="current" title="Home" href="/home/">
	
	Home
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  




<a  title="Devices" href="/home/devices/">
	
	Devices
</a>



  
    <ul>
      
        
        




<a  title="Rabbit feeder" href="/home/devices/food01/">
	
	Rabbit feeder
</a>



      
    </ul>
  
</li>



<li>
  




<a  title="Protocol" href="/home/protocol/">
	
	Protocol
</a>



  
</li>



<li>
  




<a  title="Contributing" href="/home/contributing/">
	
	Contributing
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/conejoninja" target="_blank" title="@conejoninja on GitHub">
              @conejoninja on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:conejo@conejo.me" title="Email of conejo@conejo.me">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			
				<h1>Home Automation project </h1>

				

<p>Amateur project to automate a few task in my home and communicate with some IoT devices. I used a mix of languages, frameworks and platforms. I will try to document as much as possible, but remember, this is an amateur project.</p>

<h2 id="global-view">Global view</h2>

<p>In order to interact together, devices communicates with each other through a MQTT server using a custom JSON-based protocol. Besides the devices, there are a few &ldquo;modules&rdquo; too, those modules are programs that consume the MQTT messages, perform actions based of information and allow human interaction (Web, App).</p>

<p><img src="https://conejoninja.github.io/home/images/diagram.v2.png" alt="Global view" /></p>

<p>Devices on the left size of the image (rover, food, device x) are connected to through wifi or ethernet to the home network. Modules on the right (logger, cc, dashboard) reside in an external server along with the MQTT server, but they could live in a Raspberry Pi or similar inside the home network.</p>

<h2 id="protocol">Protocol</h2>

<p>I decided to created my own protocol sinces I didn&rsquo;t find any that suits my needs and was easy to use. The protocol is best described at the <a href="https://conejoninja.github.io/home/protocol/">protocol section</a>.</p>

<h2 id="mqtt-server">MQTT server</h2>

<p>For the MQTT server I choose to use <a href="https://mosquitto.org/">Mosquitto</a> inside a <a href="http://docker.com/">Docker</a> running on a external server.</p>

<h2 id="logger">Logger</h2>

<p>Logger is running program that listen to everything on the network and saves the important information (sensor data, events and devices&rsquo; descriptions) to a database, for later consumption and stats. Logger is written in Go.</p>

<h2 id="database">Database</h2>

<p>For the database I choose to use <a href="https://github.com/dgraph-io/badger">Badger</a>, Go-native key-value database.</p>

<h2 id="command-and-control-cc">Command and Control (CC)</h2>

<p>Here is where the real magic happens, Go program that automates tasks based on the information stored in the database, such as if it&rsquo;s too hot, switch on the fan.</p>

<h2 id="dashboard-api">Dashboard / API</h2>

<p>The dashboard/API to consume the information off of the database and show some nice charts to the users (web, mobile app) and allow them to manually perform actions or request additional data.</p>

<h2 id="devices">Devices</h2>

<h3 id="food-01">Food-01</h3>

<p>Food-01 is a rabbit automatic feeder. It dispenses food twice a day, small quantity on breakfast and a bigger one at dinner time. It communicates the status, if there was any problem during its operation. It accepts an user command to dispense extra food at any given time. It also sends temperature/humidity</p>

			

			<aside class="copyright" role="note">
				
				&copy; 2017 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				



<nav class="pagination" aria-label="Footer">
  <div class="previous">
  </div>

  
  
  <div class="next">
      <a href="https://conejoninja.github.io/home/categories/" title="Categories">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Categories
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  </div>
</nav>



			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/conejoninja.github.io\/home\/';
      var repo_id  = 'conejoninja\/home';
    
    </script>

    <script src="https://conejoninja.github.io/home/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');
      console.log("SCROLLSPY", scrollspy);
      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

